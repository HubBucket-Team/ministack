{"format_version":"0.1","terraform_version":"0.12.1-8-gb84562d4d","planned_values":{"outputs":{"consul_container":{"sensitive":false},"vault_container":{"sensitive":false}},"root_module":{"child_modules":[{"resources":[{"address":"module.consul_container.docker_container.consul","mode":"managed","type":"docker_container","name":"consul","provider_name":"docker","schema_version":1,"values":{"attach":false,"capabilities":[],"command":null,"cpu_set":null,"cpu_shares":null,"destroy_grace_seconds":null,"devices":[],"dns":null,"dns_opts":null,"dns_search":null,"domainname":null,"entrypoint":null,"env":["CONSUL_HTTP_TOKEN=supersecure"],"healthcheck":[],"host":[],"hostname":"consul","labels":null,"links":null,"log_driver":"json-file","log_opts":null,"logs":false,"max_retry_count":null,"memory":null,"memory_swap":null,"mounts":[],"must_run":true,"network_alias":null,"network_mode":null,"networks":null,"networks_advanced":[{"aliases":[],"ipv4_address":"","ipv6_address":"","name":"ministack"}],"pid_mode":null,"ports":[{"external":8300,"internal":8300,"ip":"0.0.0.0","protocol":"tcp"},{"external":8301,"internal":8301,"ip":"0.0.0.0","protocol":"tcp"},{"external":8301,"internal":8301,"ip":"0.0.0.0","protocol":"udp"},{"external":8302,"internal":8302,"ip":"0.0.0.0","protocol":"tcp"},{"external":8302,"internal":8302,"ip":"0.0.0.0","protocol":"udp"},{"external":8400,"internal":8400,"ip":"0.0.0.0","protocol":"tcp"},{"external":8500,"internal":8500,"ip":"0.0.0.0","protocol":"tcp"},{"external":8600,"internal":8600,"ip":"0.0.0.0","protocol":"tcp"},{"external":53,"internal":8600,"ip":"0.0.0.0","protocol":"udp"}],"privileged":null,"publish_all_ports":null,"restart":"no","rm":false,"start":true,"tmpfs":null,"ulimit":[],"upload":[],"user":null,"userns_mode":null,"volumes":[{"container_path":"/consul/data","from_container":"","host_path":"/tmp/consul-data","read_only":null,"volume_name":""}]}},{"address":"module.consul_container.docker_image.consul","mode":"managed","type":"docker_image","name":"consul","provider_name":"docker","schema_version":0,"values":{"keep_locally":null,"name":"consul","pull_trigger":null,"pull_triggers":["sha256:e70c788854dd6e8ee0aa3d4c3a6a8c717ce74ed3c18b1665d983bf7e5fff5486"]}},{"address":"module.consul_container.null_resource.consul_directory","mode":"managed","type":"null_resource","name":"consul_directory","provider_name":"null","schema_version":0,"values":{"triggers":null}},{"address":"module.consul_container.random_pet.pet_name","mode":"managed","type":"random_pet","name":"pet_name","provider_name":"random","schema_version":0,"values":{"keepers":null,"length":2,"prefix":"consul","separator":"-"}}],"address":"module.consul_container"},{"resources":[{"address":"module.network.docker_network.private_network","mode":"managed","type":"docker_network","name":"private_network","provider_name":"docker","schema_version":0,"values":{"attachable":null,"check_duplicate":null,"driver":"bridge","ingress":null,"ipam_config":[{"aux_address":null,"gateway":"172.23.0.1","ip_range":"","subnet":"172.23.0.0/16"}],"ipam_driver":null,"ipv6":null,"labels":null,"name":"ministack"}}],"address":"module.network"},{"resources":[{"address":"module.vault_container.docker_container.vault","mode":"managed","type":"docker_container","name":"vault","provider_name":"docker","schema_version":1,"values":{"attach":false,"capabilities":[{"add":["IPC_LOCK","NET_ADMIN","SYS_PTRACE"],"drop":[]}],"command":["vault","server","-config=/vault/config/vault-config.json"],"cpu_set":null,"cpu_shares":null,"destroy_grace_seconds":null,"devices":[],"dns":null,"dns_opts":null,"dns_search":null,"domainname":null,"entrypoint":null,"env":null,"healthcheck":[],"host":[],"hostname":null,"labels":null,"links":null,"log_driver":"json-file","log_opts":null,"logs":false,"max_retry_count":null,"memory":null,"memory_swap":null,"mounts":[],"must_run":true,"network_alias":null,"network_mode":null,"networks":null,"networks_advanced":[{"aliases":[],"ipv4_address":"","ipv6_address":"","name":"ministack"}],"pid_mode":null,"ports":[{"external":8200,"internal":8200,"ip":"0.0.0.0","protocol":"tcp"}],"privileged":null,"publish_all_ports":null,"restart":"no","rm":false,"start":true,"tmpfs":null,"ulimit":[],"upload":[{"executable":false,"file":"/vault/config/vault-config.json"}],"user":null,"userns_mode":null,"volumes":[]}},{"address":"module.vault_container.docker_image.vault","mode":"managed","type":"docker_image","name":"vault","provider_name":"docker","schema_version":0,"values":{"keep_locally":null,"name":"vault","pull_trigger":null,"pull_triggers":["sha256:fad719a5a851c36433abb57d305caa8c674a54c2e6b692bac4ba3474ee7e6453"]}},{"address":"module.vault_container.random_pet.pet_name","mode":"managed","type":"random_pet","name":"pet_name","provider_name":"random","schema_version":0,"values":{"keepers":null,"length":2,"prefix":"vault","separator":"-"}}],"address":"module.vault_container"}]}},"resource_changes":[{"address":"module.consul_container.docker_container.consul","module_address":"module.consul_container","mode":"managed","type":"docker_container","name":"consul","provider_name":"docker","change":{"actions":["create"],"before":null,"after":{"attach":false,"capabilities":[],"command":null,"cpu_set":null,"cpu_shares":null,"destroy_grace_seconds":null,"devices":[],"dns":null,"dns_opts":null,"dns_search":null,"domainname":null,"entrypoint":null,"env":["CONSUL_HTTP_TOKEN=supersecure"],"healthcheck":[],"host":[],"hostname":"consul","labels":null,"links":null,"log_driver":"json-file","log_opts":null,"logs":false,"max_retry_count":null,"memory":null,"memory_swap":null,"mounts":[],"must_run":true,"network_alias":null,"network_mode":null,"networks":null,"networks_advanced":[{"aliases":[],"ipv4_address":"","ipv6_address":"","name":"ministack"}],"pid_mode":null,"ports":[{"external":8300,"internal":8300,"ip":"0.0.0.0","protocol":"tcp"},{"external":8301,"internal":8301,"ip":"0.0.0.0","protocol":"tcp"},{"external":8301,"internal":8301,"ip":"0.0.0.0","protocol":"udp"},{"external":8302,"internal":8302,"ip":"0.0.0.0","protocol":"tcp"},{"external":8302,"internal":8302,"ip":"0.0.0.0","protocol":"udp"},{"external":8400,"internal":8400,"ip":"0.0.0.0","protocol":"tcp"},{"external":8500,"internal":8500,"ip":"0.0.0.0","protocol":"tcp"},{"external":8600,"internal":8600,"ip":"0.0.0.0","protocol":"tcp"},{"external":53,"internal":8600,"ip":"0.0.0.0","protocol":"udp"}],"privileged":null,"publish_all_ports":null,"restart":"no","rm":false,"start":true,"tmpfs":null,"ulimit":[],"upload":[],"user":null,"userns_mode":null,"volumes":[{"container_path":"/consul/data","from_container":"","host_path":"/tmp/consul-data","read_only":null,"volume_name":""}]},"after_unknown":{"bridge":true,"capabilities":[],"container_logs":true,"devices":[],"env":[false],"exit_code":true,"gateway":true,"healthcheck":[],"host":[],"id":true,"image":true,"ip_address":true,"ip_prefix_length":true,"mounts":[],"name":true,"network_data":true,"networks_advanced":[{"aliases":[]}],"ports":[{},{},{},{},{},{},{},{},{}],"ulimit":[],"upload":[],"volumes":[{}]}}},{"address":"module.consul_container.docker_image.consul","module_address":"module.consul_container","mode":"managed","type":"docker_image","name":"consul","provider_name":"docker","change":{"actions":["create"],"before":null,"after":{"keep_locally":null,"name":"consul","pull_trigger":null,"pull_triggers":["sha256:e70c788854dd6e8ee0aa3d4c3a6a8c717ce74ed3c18b1665d983bf7e5fff5486"]},"after_unknown":{"id":true,"latest":true,"pull_triggers":[false]}}},{"address":"module.consul_container.null_resource.consul_directory","module_address":"module.consul_container","mode":"managed","type":"null_resource","name":"consul_directory","provider_name":"null","change":{"actions":["create"],"before":null,"after":{"triggers":null},"after_unknown":{"id":true}}},{"address":"module.consul_container.random_pet.pet_name","module_address":"module.consul_container","mode":"managed","type":"random_pet","name":"pet_name","provider_name":"random","change":{"actions":["create"],"before":null,"after":{"keepers":null,"length":2,"prefix":"consul","separator":"-"},"after_unknown":{"id":true}}},{"address":"module.network.docker_network.private_network","module_address":"module.network","mode":"managed","type":"docker_network","name":"private_network","provider_name":"docker","change":{"actions":["create"],"before":null,"after":{"attachable":null,"check_duplicate":null,"driver":"bridge","ingress":null,"ipam_config":[{"aux_address":null,"gateway":"172.23.0.1","ip_range":"","subnet":"172.23.0.0/16"}],"ipam_driver":null,"ipv6":null,"labels":null,"name":"ministack"},"after_unknown":{"id":true,"internal":true,"ipam_config":[{}],"options":true,"scope":true}}},{"address":"module.vault_container.docker_container.vault","module_address":"module.vault_container","mode":"managed","type":"docker_container","name":"vault","provider_name":"docker","change":{"actions":["create"],"before":null,"after":{"attach":false,"capabilities":[{"add":["IPC_LOCK","NET_ADMIN","SYS_PTRACE"],"drop":[]}],"command":["vault","server","-config=/vault/config/vault-config.json"],"cpu_set":null,"cpu_shares":null,"destroy_grace_seconds":null,"devices":[],"dns":null,"dns_opts":null,"dns_search":null,"domainname":null,"entrypoint":null,"env":null,"healthcheck":[],"host":[],"hostname":null,"labels":null,"links":null,"log_driver":"json-file","log_opts":null,"logs":false,"max_retry_count":null,"memory":null,"memory_swap":null,"mounts":[],"must_run":true,"network_alias":null,"network_mode":null,"networks":null,"networks_advanced":[{"aliases":[],"ipv4_address":"","ipv6_address":"","name":"ministack"}],"pid_mode":null,"ports":[{"external":8200,"internal":8200,"ip":"0.0.0.0","protocol":"tcp"}],"privileged":null,"publish_all_ports":null,"restart":"no","rm":false,"start":true,"tmpfs":null,"ulimit":[],"upload":[{"executable":false,"file":"/vault/config/vault-config.json"}],"user":null,"userns_mode":null,"volumes":[]},"after_unknown":{"bridge":true,"capabilities":[{"add":[false,false,false],"drop":[]}],"command":[false,false,false],"container_logs":true,"devices":[],"exit_code":true,"gateway":true,"healthcheck":[],"host":[],"id":true,"image":true,"ip_address":true,"ip_prefix_length":true,"mounts":[],"name":true,"network_data":true,"networks_advanced":[{"aliases":[]}],"ports":[{}],"ulimit":[],"upload":[{"content":true}],"volumes":[]}}},{"address":"module.vault_container.docker_image.vault","module_address":"module.vault_container","mode":"managed","type":"docker_image","name":"vault","provider_name":"docker","change":{"actions":["create"],"before":null,"after":{"keep_locally":null,"name":"vault","pull_trigger":null,"pull_triggers":["sha256:fad719a5a851c36433abb57d305caa8c674a54c2e6b692bac4ba3474ee7e6453"]},"after_unknown":{"id":true,"latest":true,"pull_triggers":[false]}}},{"address":"module.vault_container.random_pet.pet_name","module_address":"module.vault_container","mode":"managed","type":"random_pet","name":"pet_name","provider_name":"random","change":{"actions":["create"],"before":null,"after":{"keepers":null,"length":2,"prefix":"vault","separator":"-"},"after_unknown":{"id":true}}}],"output_changes":{"consul_container":{"actions":["create"],"before":null,"after_unknown":true},"vault_container":{"actions":["create"],"before":null,"after_unknown":true}},"prior_state":{"format_version":"0.1","terraform_version":"0.12.1","values":{"root_module":{"child_modules":[{"resources":[{"address":"data.docker_registry_image.consul","mode":"data","type":"docker_registry_image","name":"consul","provider_name":"docker","schema_version":0,"values":{"id":"sha256:e70c788854dd6e8ee0aa3d4c3a6a8c717ce74ed3c18b1665d983bf7e5fff5486","name":"consul","sha256_digest":"sha256:e70c788854dd6e8ee0aa3d4c3a6a8c717ce74ed3c18b1665d983bf7e5fff5486"}}],"address":"module.consul_container"},{"resources":[{"address":"data.docker_registry_image.vault","mode":"data","type":"docker_registry_image","name":"vault","provider_name":"docker","schema_version":0,"values":{"id":"sha256:fad719a5a851c36433abb57d305caa8c674a54c2e6b692bac4ba3474ee7e6453","name":"vault","sha256_digest":"sha256:fad719a5a851c36433abb57d305caa8c674a54c2e6b692bac4ba3474ee7e6453"}}],"address":"module.vault_container"}]}}},"configuration":{"root_module":{"outputs":{"consul_container":{"expression":{"references":["module.consul_container.container_name"]}},"vault_container":{"expression":{"references":["module.vault_container.container_name"]}}},"module_calls":{"consul_container":{"source":"./consul","expressions":{"network":{"references":["module.network.docker_network"]}},"module":{"outputs":{"container_name":{"expression":{"references":["docker_container.consul"]}}},"resources":[{"address":"docker_container.consul","mode":"managed","type":"docker_container","name":"consul","provider_config_key":"consul_container:docker","expressions":{"env":{"constant_value":["CONSUL_HTTP_TOKEN=supersecure"]},"hostname":{"constant_value":"consul"},"image":{"references":["docker_image.consul"]},"name":{"references":["random_pet.pet_name"]},"networks_advanced":[{"name":{"references":["var.network"]}}],"volumes":[{"container_path":{"constant_value":"/consul/data"},"host_path":{"constant_value":"/tmp/consul-data"}}]},"schema_version":1,"depends_on":["null_resource.consul_directory"]},{"address":"docker_image.consul","mode":"managed","type":"docker_image","name":"consul","provider_config_key":"consul_container:docker","expressions":{"name":{"references":["data.docker_registry_image.consul"]},"pull_triggers":{"references":["data.docker_registry_image.consul"]}},"schema_version":0},{"address":"null_resource.consul_directory","mode":"managed","type":"null_resource","name":"consul_directory","provider_config_key":"consul_container:null","provisioners":[{"type":"local-exec","expressions":{"command":{"constant_value":"mkdir -p /tmp/consul-data"}}}],"schema_version":0},{"address":"random_pet.pet_name","mode":"managed","type":"random_pet","name":"pet_name","provider_config_key":"consul_container:random","expressions":{"length":{"constant_value":2},"prefix":{"constant_value":"consul"}},"schema_version":0},{"address":"data.docker_registry_image.consul","mode":"data","type":"docker_registry_image","name":"consul","provider_config_key":"consul_container:docker","expressions":{"name":{"constant_value":"consul"}},"schema_version":0}],"variables":{"consul_ports":{"default":[{"external":8300,"internal":8300,"protocol":"tcp"},{"external":8301,"internal":8301,"protocol":"tcp"},{"external":8301,"internal":8301,"protocol":"udp"},{"external":8302,"internal":8302,"protocol":"tcp"},{"external":8302,"internal":8302,"protocol":"udp"},{"external":8400,"internal":8400,"protocol":"tcp"},{"external":8500,"internal":8500,"protocol":"tcp"},{"external":8600,"internal":8600,"protocol":"tcp"},{"external":53,"internal":8600,"protocol":"udp"}]},"network":{"description":"An entire `docker_network` resource"}}}},"network":{"source":"./network","module":{"outputs":{"docker_network":{"expression":{"references":["docker_network.private_network"]}}},"resources":[{"address":"docker_network.private_network","mode":"managed","type":"docker_network","name":"private_network","provider_config_key":"network:docker","expressions":{"driver":{"constant_value":"bridge"},"ipam_config":[{"gateway":{"constant_value":"172.23.0.1"},"subnet":{"constant_value":"172.23.0.0/16"}}],"name":{"constant_value":"ministack"}},"schema_version":0}]}},"vault_container":{"source":"./vault","expressions":{"consul_host":{"references":["module.consul_container.container_name"]},"network":{"references":["module.network.docker_network"]}},"module":{"outputs":{"container_name":{"expression":{"references":["docker_container.vault"]}}},"resources":[{"address":"docker_container.vault","mode":"managed","type":"docker_container","name":"vault","provider_config_key":"vault_container:docker","expressions":{"capabilities":[{"add":{"constant_value":["IPC_LOCK","NET_ADMIN","SYS_PTRACE"]}}],"command":{"constant_value":["vault","server","-config=/vault/config/vault-config.json"]},"image":{"references":["docker_image.vault"]},"name":{"references":["random_pet.pet_name"]},"networks_advanced":[{"name":{"references":["var.network"]}}],"ports":[{"external":{"constant_value":8200},"internal":{"constant_value":8200},"protocol":{"constant_value":"tcp"}}],"upload":[{"content":{"references":["path.module","var.consul_host"]},"file":{"constant_value":"/vault/config/vault-config.json"}}]},"schema_version":1},{"address":"docker_image.vault","mode":"managed","type":"docker_image","name":"vault","provider_config_key":"vault_container:docker","expressions":{"name":{"references":["data.docker_registry_image.vault"]},"pull_triggers":{"references":["data.docker_registry_image.vault"]}},"schema_version":0},{"address":"random_pet.pet_name","mode":"managed","type":"random_pet","name":"pet_name","provider_config_key":"vault_container:random","expressions":{"length":{"constant_value":2},"prefix":{"constant_value":"vault"}},"schema_version":0},{"address":"data.docker_registry_image.vault","mode":"data","type":"docker_registry_image","name":"vault","provider_config_key":"vault_container:docker","expressions":{"name":{"constant_value":"vault"}},"schema_version":0}],"variables":{"consul_host":{},"network":{"description":"An entire `docker_network` resource"}}}}}}}}
